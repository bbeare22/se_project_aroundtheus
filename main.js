!function(){"use strict";const t=".cards__list",e="#card-template",r={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class i{constructor(t,e,r,i){let{name:s,link:n,_id:o}=t;this._name=s,this._link=n,this._id=o,this._cardSelector=e,this._handleImageClick=r,this._handleDeleteClick=i,this._element=this._getTemplate(),this._image=this._element.querySelector(".card__image"),this._title=this._element.querySelector(".card__title"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button")}getView(){return this._image.src=this._link,this._image.alt=this._name,this._title.textContent=this._name,this._setEventListeners(),this._element}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._toggleLike())),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this,this._id)})),this._image.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_toggleLike(){this._likeButton.classList.toggle("card__like-button_active")}removeCard(){this._element.remove(),this._element=null}}class s{constructor(t,e){this._form=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputEls.some((t=>!t.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._toggleButtonState(),this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}resetValidation(){this._inputEls.forEach((t=>{this._hideInputError(t)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(t=>t.preventDefault())),this._setEventListeners()}}class n{constructor(t,e){let{items:r=[],renderer:i}=t;this._items=r,this._renderer=i,this._container=document.querySelector(e)}renderItems(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._items).forEach((t=>this._renderer(t)))}addItem(t){this._container.prepend(t)}}class o{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{const e=t.target===this._popupElement,r=t.target.classList.contains("modal__close");(e||r)&&this.close()}))}}class a extends o{constructor(t,e){super({popupSelector:t}),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._inputs=Array.from(this._form.querySelectorAll(".modal__input")),this._submitButton=this._form.querySelector(".modal__button"),this._defaultButtonText=this._submitButton.textContent}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputs.forEach((e=>{const r=t[e.name];e.value="string"==typeof r?r.trim():""}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault();const e=this._getInputValues();this.renderLoading(!0),this._handleFormSubmit(e).then((()=>{this._form.reset(),this.close()})).catch((t=>{console.error("Form submission failed:",t)})).finally((()=>{this.renderLoading(!1)}))}))}renderLoading(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=t?e:this._defaultButtonText}}class l extends o{constructor(t){super({popupSelector:t}),this._image=this._popupElement.querySelector("#image-modal-image"),this._caption=this._popupElement.querySelector("#modal-caption")}open(t){let{name:e,link:r}=t;this._image.src=r,this._image.alt=e?`Photo of ${e}`:"Photo preview",this._caption.textContent=e||"",super.open()}}class d extends o{constructor(t){let{popupSelector:e,submitButtonSelector:r=".modal__button"}=t;super({popupSelector:e}),this._form=this._popupElement.querySelector("form"),this._submitButton=this._form.querySelector(r),this._originalButtonText=this._submitButton.textContent,this._handleSubmit=null}setSubmitAction(t){this._handleSubmit=t}renderSaving(t){this._submitButton.textContent=t?"Deleting...":this._originalButtonText}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._handleSubmit&&this._handleSubmit()}))}}class u{constructor(t){let{nameSelector:e,jobSelector:r,avatarSelector:i}=t;this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(r),this._avatarElement=document.querySelector(i)}getUserInfo(){return{name:this._nameElement.textContent,about:this._jobElement.textContent}}setUserInfo(t){let{name:e,about:r,avatar:i}=t;e&&(this._nameElement.textContent=e),r&&(this._jobElement.textContent=r),i&&this.setAvatar(i)}setAvatar(t){this._avatarElement&&(this._avatarElement.src=t)}}let c,h,m,_,p,S;const E=new class{constructor(t){let{baseUrl:e,headers:r}=t;this._baseUrl=e,this._headers=r}_handleResponse(t){return t.ok?t.json():Promise.reject(`Error: ${t.status}`)}_request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(`${this._baseUrl}${t}`,{...e,headers:this._headers}).then(this._handleResponse)}getUserInfo(){return this._request("/users/me")}updateUserInfo(t){let{name:e,about:r}=t;return this._request("/users/me",{method:"PATCH",body:JSON.stringify({name:e,about:r})})}updateAvatar(t){return this._request("/users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:t})})}getInitialCards(){return this._request("/cards")}addCard(t){let{name:e,link:r}=t;return this._request("/cards",{method:"POST",body:JSON.stringify({name:e,link:r})})}deleteCard(t){return this._request(`/cards/${t}`,{method:"DELETE"})}likeCard(t){return this._request(`/cards/${t}/likes`,{method:"PUT"})}dislikeCard(t){return this._request(`/cards/${t}/likes`,{method:"DELETE"})}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"806a2baa-081d-4321-b473-e51300bcf632","Content-Type":"application/json"}});document.addEventListener("DOMContentLoaded",(()=>{_=function(){const r=document.querySelector(".profile"),i=document.querySelector("#add-card-modal"),s=document.querySelector("#popup-preview-modal"),n=document.querySelector("#avatar-edit-modal");return{profile:r,profileEditButton:r.querySelector("#profile-edit-button"),profileTitle:r.querySelector("#profile-title"),profileDescription:r.querySelector("#profile-description"),cardAddButton:r.querySelector("#card-add-button"),cardListEl:document.querySelector(t),cardTemplate:document.querySelector(e),profileEdit:document.querySelector("#profile-edit-modal"),profileEditForm:document.querySelector("#edit-profile-form"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),cardAdd:i,cardAddForm:document.querySelector("#add-card-form"),cardTitleInput:i.querySelector(".modal__input_type_title"),cardImageInput:i.querySelector("#card-description-input"),cardURLInput:i.querySelector(".modal__input_type_url"),imageModal:s,imageModalImage:s.querySelector("#image-modal-image"),imageModalCaption:s.querySelector("#modal-caption"),avatarEditForm:n.querySelector(".modal__form"),avatarEditButton:document.querySelector(".profile__avatar-edit-button"),confirmDeleteModal:document.querySelector("#confirm-delete-modal")}}();const o=new u({nameSelector:"#profile-title",jobSelector:"#profile-description",avatarSelector:".profile__image"});c=new s(r,_.profileEditForm),c.enableValidation(),h=new s(r,_.cardAddForm),h.enableValidation(),m=new s(r,_.avatarEditForm),m.enableValidation();const v=new d({popupSelector:"#confirm-delete-modal"});v.setEventListeners(),p=new n({items:[],renderer:q},t);const f=new a("#add-card-modal",(t=>E.addCard({name:t.title,link:t.url}).then((t=>{q(t),f.close(),h.disableSubmitButton()})).catch((t=>{console.error("Error adding card:",t)}))));f.setEventListeners();const b=new a("#profile-edit-modal",(t=>E.updateUserInfo({name:t.name,about:t.about}).then((t=>{o.setUserInfo(t)})).catch((t=>{console.error("Error updating profile:",t)}))));b.setEventListeners();const g=new a("#avatar-edit-modal",(t=>E.updateAvatar(t.avatar).then((t=>{o.setAvatar(t.avatar)})).catch((t=>{console.error("Error updating avatar:",t)}))));g.setEventListeners();const y=new l("#popup-preview-modal");function q(t){const r=new i(t,e,C,((t,e)=>{v.setSubmitAction((()=>{v.renderSaving(!0),E.deleteCard(e).then((()=>{t.removeCard(),v.close()})).catch((t=>console.error("Error deleting card:",t))).finally((()=>{v.renderSaving(!1)}))})),v.open()}));p.addItem(r.getView())}function C(t){y.open(t)}y.setEventListeners(),E.getAppData().then((t=>{let[e,r]=t;S=e._id,o.setUserInfo(e),p.renderItems(r)})).catch((t=>console.error("Initialization error:",t))),_.profileEditButton.addEventListener("click",(()=>{c.resetValidation(),b.setInputValues(o.getUserInfo()),b.open()})),_.cardAddButton.addEventListener("click",(()=>{h.resetValidation(),f.open()})),_.avatarEditButton.addEventListener("click",(()=>{m.resetValidation(),g.open()}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBbkUsTUFBS2pILElBQXVCLElBQXJCK04sRUFBVUMsR0FBTWhPLEVBQ3RCc0osRUFBU3lFLEVBQVN6TixJQUNsQjBNLEVBQVNwRSxZQUFZbUYsR0FDckIxRSxFQUFZekUsWUFBWW9KLEVBQU0sSUFFL0I3RyxPQUFPQyxHQUFRQyxRQUFRQyxNQUFNLHdCQUF5QkYsS0E4QnpEZ0MsRUFBSXVDLGtCQUFrQi9KLGlCQUFpQixTQUFTLEtBQzlDcUgsRUFBa0JoRixrQkFDbEJ1SixFQUFpQjVHLGVBQWVvRyxFQUFTdEUsZUFDekM4RSxFQUFpQi9ILE1BQU0sSUFHekIyRCxFQUFJMEMsY0FBY2xLLGlCQUFpQixTQUFTLEtBQzFDc0gsRUFBaUJqRixrQkFDakJrSixFQUFxQjFILE1BQU0sSUFHN0IyRCxFQUFJeUQsaUJBQWlCakwsaUJBQWlCLFNBQVMsS0FDN0N1SCxFQUFvQmxGLGtCQUNwQnlKLEVBQWdCakksTUFBTSxHQU14QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PSBTZWxlY3RvcnMgPT09XHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbn07XHJcblxyXG4vLyA9PT0gVmFsaWRhdGlvbiBTZXR0aW5ncyA9PT1cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vID09PSBET00gRWxlbWVudHMgR2V0dGVyID09PVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RE9NRWxlbWVudHMoKSB7XHJcbiAgY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuICBjb25zdCBjYXJkQWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG4gIGNvbnN0IGltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLXByZXZpZXctbW9kYWxcIik7XHJcbiAgY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcHJvZmlsZSxcclxuICAgIHByb2ZpbGVFZGl0QnV0dG9uOiBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKSxcclxuICAgIHByb2ZpbGVUaXRsZTogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGVcIiksXHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb246IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpLFxyXG5cclxuICAgIGNhcmRBZGRCdXR0b246IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1idXR0b25cIiksXHJcbiAgICBjYXJkTGlzdEVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkU2VjdGlvbiksXHJcbiAgICBjYXJkVGVtcGxhdGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSksXHJcblxyXG4gICAgcHJvZmlsZUVkaXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpLFxyXG4gICAgcHJvZmlsZUVkaXRGb3JtOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1mb3JtXCIpLFxyXG4gICAgcHJvZmlsZVRpdGxlSW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKSxcclxuICAgIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuICAgICksXHJcblxyXG4gICAgY2FyZEFkZDogY2FyZEFkZE1vZGFsLFxyXG4gICAgY2FyZEFkZEZvcm06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKSxcclxuICAgIGNhcmRUaXRsZUlucHV0OiBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV90aXRsZVwiKSxcclxuICAgIGNhcmRJbWFnZUlucHV0OiBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWRlc2NyaXB0aW9uLWlucHV0XCIpLFxyXG4gICAgY2FyZFVSTElucHV0OiBjYXJkQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV91cmxcIiksXHJcblxyXG4gICAgaW1hZ2VNb2RhbCxcclxuICAgIGltYWdlTW9kYWxJbWFnZTogaW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLW1vZGFsLWltYWdlXCIpLFxyXG4gICAgaW1hZ2VNb2RhbENhcHRpb246IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1jYXB0aW9uXCIpLFxyXG5cclxuICAgIGF2YXRhckVkaXRGb3JtOiBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpLFxyXG4gICAgYXZhdGFyRWRpdEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdC1idXR0b25cIiksXHJcblxyXG4gICAgY29uZmlybURlbGV0ZU1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm0tZGVsZXRlLW1vZGFsXCIpLFxyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5faWQgPSBfaWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl90b2dnbGVMaWtlKCkpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMsIHRoaXMuX2lkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMgPSBbXSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcyA9IHRoaXMuX2l0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzT3ZlcmxheUNsaWNrID0gZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50O1xyXG4gICAgICBjb25zdCBpc0Nsb3NlQnRuQ2xpY2sgPSBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbiAgICAgIGlmIChpc092ZXJsYXlDbGljayB8fCBpc0Nsb3NlQnRuQ2xpY2spIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWZhdWx0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgICAgaW5wdXQudmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS50cmltKCkgOiBcIlwiO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkZvcm0gc3VibWlzc2lvbiBmYWlsZWQ6XCIsIGVycik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBpc0xvYWRpbmdcclxuICAgICAgPyBsb2FkaW5nVGV4dFxyXG4gICAgICA6IHRoaXMuX2RlZmF1bHRCdXR0b25UZXh0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lID8gYFBob3RvIG9mICR7bmFtZX1gIDogXCJQaG90byBwcmV2aWV3XCI7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZSB8fCBcIlwiO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciA9IFwiLm1vZGFsX19idXR0b25cIiB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX29yaWdpbmFsQnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oY2FsbGJhY2spIHtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2F2aW5nKGlzU2F2aW5nKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBpc1NhdmluZ1xyXG4gICAgICA/IFwiRGVsZXRpbmcuLi5cIlxyXG4gICAgICA6IHRoaXMuX29yaWdpbmFsQnV0dG9uVGV4dDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAodGhpcy5faGFuZGxlU3VibWl0KSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XHJcbiAgICBpZiAobmFtZSkgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgaWYgKGFib3V0KSB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICBpZiAoYXZhdGFyKSB0aGlzLnNldEF2YXRhcihhdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKGF2YXRhclVybCkge1xyXG4gICAgaWYgKHRoaXMuX2F2YXRhckVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXJVcmw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcbiAgc2VsZWN0b3JzLFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBnZXRET01FbGVtZW50cyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5sZXQgZWRpdEZvcm1WYWxpZGF0b3I7XHJcbmxldCBhZGRGb3JtVmFsaWRhdG9yO1xyXG5sZXQgYXZhdGFyRm9ybVZhbGlkYXRvcjtcclxubGV0IGRvbTtcclxubGV0IGNhcmRTZWN0aW9uO1xyXG5sZXQgdXNlcklkO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiODA2YTJiYWEtMDgxZC00MzIxLWI0NzMtZTUxMzAwYmNmNjMyXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBkb20gPSBnZXRET01FbGVtZW50cygpO1xyXG5cclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtdGl0bGVcIixcclxuICAgIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXHJcbiAgICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxuICB9KTtcclxuXHJcbiAgLy8gVmFsaWRhdG9yc1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgICBkb20ucHJvZmlsZUVkaXRGb3JtXHJcbiAgKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4gIGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGRvbS5jYXJkQWRkRm9ybSk7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICAgIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICAgIGRvbS5hdmF0YXJFZGl0Rm9ybVxyXG4gICk7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4gIC8vIENvbmZpcm0gRGVsZXRlIE1vZGFsXHJcbiAgY29uc3QgY29uZmlybURlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oe1xyXG4gICAgcG9wdXBTZWxlY3RvcjogXCIjY29uZmlybS1kZWxldGUtbW9kYWxcIixcclxuICB9KTtcclxuICBjb25maXJtRGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgLy8gQ2FyZCBTZWN0aW9uXHJcbiAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgIHsgaXRlbXM6IFtdLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxyXG4gICAgc2VsZWN0b3JzLmNhcmRTZWN0aW9uXHJcbiAgKTtcclxuXHJcbiAgLy8gQWRkIENhcmQgUG9wdXBcclxuICBjb25zdCBjYXJkQWRkUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICAgICh2YWx1ZXMpID0+IHtcclxuICAgICAgcmV0dXJuIGFwaVxyXG4gICAgICAgIC5hZGRDYXJkKHsgbmFtZTogdmFsdWVzLnRpdGxlLCBsaW5rOiB2YWx1ZXMudXJsIH0pXHJcbiAgICAgICAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgICAgICAgIHJlbmRlckNhcmQobmV3Q2FyZCk7XHJcbiAgICAgICAgICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5jbG9zZSgpOyAvLyDihpAgY2xvc2Ugb24gc3VjY2Vzc1xyXG4gICAgICAgICAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBjYXJkOlwiLCBlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgY2FyZEFkZFBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgLy8gRWRpdCBQcm9maWxlIFBvcHVwXHJcbiAgY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgICAodmFsdWVzKSA9PiB7XHJcbiAgICAgIHJldHVybiBhcGlcclxuICAgICAgICAudXBkYXRlVXNlckluZm8oeyBuYW1lOiB2YWx1ZXMubmFtZSwgYWJvdXQ6IHZhbHVlcy5hYm91dCB9KVxyXG4gICAgICAgIC50aGVuKCh1cGRhdGVkVXNlcikgPT4ge1xyXG4gICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXBkYXRlZFVzZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBwcm9maWxlOlwiLCBlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICk7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAvLyBFZGl0IEF2YXRhciBQb3B1cFxyXG4gIGNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsICh2YWx1ZXMpID0+IHtcclxuICAgIHJldHVybiBhcGlcclxuICAgICAgLnVwZGF0ZUF2YXRhcih2YWx1ZXMuYXZhdGFyKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0QXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBhdmF0YXI6XCIsIGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG4gIGF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAvLyBJbWFnZSBQcmV2aWV3IFBvcHVwXHJcbiAgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwb3B1cC1wcmV2aWV3LW1vZGFsXCIpO1xyXG4gIGltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgLy8gTG9hZCBpbml0aWFsIGRhdGFcclxuICBhcGlcclxuICAgIC5nZXRBcHBEYXRhKClcclxuICAgIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICAgICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiSW5pdGlhbGl6YXRpb24gZXJyb3I6XCIsIGVycikpO1xyXG5cclxuICAvLyBSZW5kZXJzIGEgc2luZ2xlIGNhcmQsIHdpcmluZyB1cCBkZWxldGUgY29uZmlybWF0aW9uXHJcbiAgZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgIGl0ZW0sXHJcbiAgICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICAgIChjYXJkSW5zdGFuY2UsIGNhcmRJZCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgY29uZmlybURlbGV0ZVBvcHVwLnJlbmRlclNhdmluZyh0cnVlKTtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkSW5zdGFuY2UucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIGNhcmQ6XCIsIGVycikpXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uZmlybURlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcclxuICB9XHJcblxyXG4gIC8vIEJ1dHRvbiBsaXN0ZW5lcnNcclxuICBkb20ucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcclxuICAgIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuICBkb20uY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIGNhcmRBZGRQb3B1cFdpdGhGb3JtLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgZG9tLmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICBhdmF0YXJFZGl0UG9wdXAub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBJbWFnZSBjbGljayBoYW5kbGVyXHJcbiAgZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xyXG4gICAgaW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKTtcclxuICB9XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KGVuZHBvaW50LCBvcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfSR7ZW5kcG9pbnR9YCwge1xyXG4gICAgICAuLi5vcHRpb25zLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvY2FyZHNcIik7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEV4YW1wbGUgdXNhZ2UgZm9yIHRlc3RpbmdcclxuLypcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiODA2YTJiYWEtMDgxZC00MzIxLWI0NzMtZTUxMzAwYmNmNjMyXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRBcHBEYXRhKClcclxuICAudGhlbigoW3VzZXJJbmZvLCBjYXJkc10pID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiVXNlciBJbmZvOlwiLCB1c2VySW5mbyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkluaXRpYWwgQ2FyZHM6XCIsIGNhcmRzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiQVBJIGxvYWQgZXJyb3I6XCIsIGVycik7XHJcbiAgfSk7XHJcbiovXHJcbiJdLCJuYW1lcyI6WyJzZWxlY3RvcnMiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1hZ2UiLCJxdWVyeVNlbGVjdG9yIiwiX3RpdGxlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9saWtlQnV0dG9uIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl90b2dnbGVMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlQ2FyZCIsInJlbW92ZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImlzT3ZlcmxheUNsaWNrIiwidGFyZ2V0IiwiaXNDbG9zZUJ0bkNsaWNrIiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2RlZmF1bHRCdXR0b25UZXh0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJ0cmltIiwiZm9ybURhdGEiLCJyZW5kZXJMb2FkaW5nIiwidGhlbiIsInJlc2V0IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJQb3B1cFdpdGhJbWFnZSIsIl9jYXB0aW9uIiwiUG9wdXBXaXRoQ29uZmlybSIsIl9vcmlnaW5hbEJ1dHRvblRleHQiLCJfaGFuZGxlU3VibWl0Iiwic2V0U3VibWl0QWN0aW9uIiwiY2FsbGJhY2siLCJyZW5kZXJTYXZpbmciLCJpc1NhdmluZyIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImFib3V0Iiwic2V0VXNlckluZm8iLCJfcmVmMiIsImF2YXRhciIsInNldEF2YXRhciIsImF2YXRhclVybCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJkb20iLCJjYXJkU2VjdGlvbiIsInVzZXJJZCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsImZldGNoIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZUF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImFkZENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiZ2V0QXBwRGF0YSIsImFsbCIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlIiwiY2FyZEFkZE1vZGFsIiwiaW1hZ2VNb2RhbCIsImF2YXRhck1vZGFsIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJjYXJkQWRkQnV0dG9uIiwiY2FyZExpc3RFbCIsImNhcmRUZW1wbGF0ZSIsInByb2ZpbGVFZGl0IiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRBZGQiLCJjYXJkQWRkRm9ybSIsImNhcmRUaXRsZUlucHV0IiwiY2FyZEltYWdlSW5wdXQiLCJjYXJkVVJMSW5wdXQiLCJpbWFnZU1vZGFsSW1hZ2UiLCJpbWFnZU1vZGFsQ2FwdGlvbiIsImF2YXRhckVkaXRGb3JtIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImNvbmZpcm1EZWxldGVNb2RhbCIsImdldERPTUVsZW1lbnRzIiwidXNlckluZm8iLCJjb25maXJtRGVsZXRlUG9wdXAiLCJyZW5kZXJDYXJkIiwiY2FyZEFkZFBvcHVwV2l0aEZvcm0iLCJ2YWx1ZXMiLCJ0aXRsZSIsInVybCIsIm5ld0NhcmQiLCJwcm9maWxlRWRpdFBvcHVwIiwidXBkYXRlZFVzZXIiLCJhdmF0YXJFZGl0UG9wdXAiLCJpbWFnZVBvcHVwIiwiY2FyZCIsImNhcmRJbnN0YW5jZSIsImNhcmREYXRhIiwidXNlckRhdGEiLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=
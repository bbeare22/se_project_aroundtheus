!function(){"use strict";const e=".cards__list",t="#card-template",i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class r{constructor(e,t,i,r,s,n){let{name:o,link:a,_id:l,isLiked:d=!1}=e;this._name=o,this._link=a,this._id=l,this._isLiked=d,this._cardSelector=t,this._handleImageClick=i,this._handleDeleteClick=r,this._handleLikeClick=s,this._currentUserId=n,this._element=this._getTemplate(),this._image=this._element.querySelector(".card__image"),this._title=this._element.querySelector(".card__title"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._likeButton=this._element.querySelector(".card__like-button")}getId(){return this._id}getView(){return this._image.src=this._link,this._image.alt=this._name,this._title.textContent=this._name,this._updateLikesView(),this._setEventListeners(),this._element}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeClick(this))),this._deleteButton.addEventListener("click",(()=>this._handleDeleteClick(this,this._id))),this._image.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link})))}isLiked(){return this._isLiked}updateLikes(e){let{isLiked:t}=e;this._isLiked=t,this._updateLikesView()}_updateLikesView(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}removeCard(){this._element.remove(),this._element=null}}class s{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}}class n{constructor(e,t){let{items:i=[],renderer:r}=e;this._items=i,this._renderer=r,this._container=document.querySelector(t)}renderItems(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._items).forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}class o{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{const t=e.target===this._popupElement,i=e.target.classList.contains("modal__close");(t||i)&&this.close()}))}}class a extends o{constructor(e,t){super({popupSelector:e}),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputs=Array.from(this._form.querySelectorAll(".modal__input")),this._submitButton=this._form.querySelector(".modal__button"),this._defaultButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputs.forEach((t=>{const i=e[t.name];t.value="string"==typeof i?i.trim():""}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this.renderLoading(!0),this._handleFormSubmit(t).then((()=>{this._form.reset(),this.close()})).catch((e=>{console.error("Form submission failed:",e)})).finally((()=>{this.renderLoading(!1)}))}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._defaultButtonText}}class l extends o{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector("#image-modal-image"),this._caption=this._popupElement.querySelector("#modal-caption")}open(e){let{name:t,link:i}=e;this._image.src=i,this._image.alt=t?`Photo of ${t}`:"Photo preview",this._caption.textContent=t||"",super.open()}}class d extends o{constructor(e){let{popupSelector:t,submitButtonSelector:i=".modal__button"}=e;super({popupSelector:t}),this._form=this._popupElement.querySelector("form"),this._submitButton=this._form.querySelector(i),this._originalButtonText=this._submitButton.textContent,this._handleSubmit=null}setSubmitAction(e){this._handleSubmit=e}renderSaving(e){this._submitButton.textContent=e?"Deleting...":this._originalButtonText}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{if(e.preventDefault(),this._handleSubmit){const e=this._handleSubmit();e&&"function"==typeof e.then&&e.catch((e=>{console.error("PopupWithConfirm submit error:",e)}))}}))}}class u{constructor(e){let{nameSelector:t,jobSelector:i,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(i),this._avatarElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._jobElement.textContent}}setUserInfo(e){let{name:t,about:i,avatar:r}=e;t&&(this._nameElement.textContent=t),i&&(this._jobElement.textContent=i),r&&this.setAvatar(r)}setAvatar(e){this._avatarElement&&(this._avatarElement.src=e)}}let c,h,_,m,p,v;const S=new class{constructor(e){let{baseUrl:t,headers:i}=e;this._baseUrl=t,this._headers=i}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(`${this._baseUrl}${e}`,{...t,headers:this._headers}).then(this._handleResponse)}getUserInfo(){return this._request("/users/me")}updateUserInfo(e){let{name:t,about:i}=e;return this._request("/users/me",{method:"PATCH",body:JSON.stringify({name:t,about:i})})}updateAvatar(e){return this._request("/users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:e})})}getInitialCards(){return this._request("/cards")}addCard(e){let{name:t,link:i}=e;return this._request("/cards",{method:"POST",body:JSON.stringify({name:t,link:i})})}deleteCard(e){return this._request(`/cards/${e}`,{method:"DELETE"})}likeCard(e){return this._request(`/cards/${e}/likes`,{method:"PUT"}).then((e=>{if(!e||"boolean"!=typeof e.isLiked)throw new Error("Invalid like response");return e}))}unlikeCard(e){return this._request(`/cards/${e}/likes`,{method:"DELETE"}).then((e=>{if(!e||"boolean"!=typeof e.isLiked)throw new Error("Invalid unlike response");return e}))}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"806a2baa-081d-4321-b473-e51300bcf632","Content-Type":"application/json"}});document.addEventListener("DOMContentLoaded",(()=>{m=function(){const i=document.querySelector(".profile"),r=document.querySelector("#add-card-modal"),s=document.querySelector("#popup-preview-modal"),n=document.querySelector("#avatar-edit-modal");return{profile:i,profileEditButton:i.querySelector("#profile-edit-button"),profileTitle:i.querySelector("#profile-title"),profileDescription:i.querySelector("#profile-description"),cardAddButton:i.querySelector("#card-add-button"),cardListEl:document.querySelector(e),cardTemplate:document.querySelector(t),profileEdit:document.querySelector("#profile-edit-modal"),profileEditForm:document.querySelector("#edit-profile-form"),profileTitleInput:document.querySelector("#profile-title-input"),profileDescriptionInput:document.querySelector("#profile-description-input"),cardAdd:r,cardAddForm:document.querySelector("#add-card-form"),cardTitleInput:r.querySelector(".modal__input_type_title"),cardImageInput:r.querySelector("#card-description-input"),cardURLInput:r.querySelector(".modal__input_type_url"),imageModal:s,imageModalImage:s.querySelector("#image-modal-image"),imageModalCaption:s.querySelector("#modal-caption"),avatarEditForm:n.querySelector(".modal__form"),avatarEditButton:document.querySelector(".profile__avatar-edit-button"),confirmDeleteModal:document.querySelector("#confirm-delete-modal")}}();const o=new u({nameSelector:"#profile-title",jobSelector:"#profile-description",avatarSelector:".profile__image"});c=new s(i,m.profileEditForm),c.enableValidation(),h=new s(i,m.cardAddForm),h.enableValidation(),_=new s(i,m.avatarEditForm),_.enableValidation();const E=new d({popupSelector:"#confirm-delete-modal"});E.setEventListeners(),p=new n({items:[],renderer:L},e);const f=new a("#add-card-modal",(e=>S.addCard({name:e.title,link:e.url}).then((e=>{L(e),h.disableSubmitButton()}))));f.setEventListeners();const b=new a("#profile-edit-modal",(e=>S.updateUserInfo({name:e.name,about:e.about}).then((e=>{o.setUserInfo(e)}))));b.setEventListeners();const y=new a("#avatar-edit-modal",(e=>S.updateAvatar(e.avatar).then((e=>{o.setAvatar(e.avatar)}))));y.setEventListeners();const g=new l("#popup-preview-modal");function L(e){const i=new r(e,t,k,((e,t)=>{E.setSubmitAction((()=>{E.renderSaving(!0),S.deleteCard(t).then((()=>{e.removeCard(),E.close()})).finally((()=>{E.renderSaving(!1)}))})),E.open()}),(e=>{const t=e.getId();(e.isLiked()?S.unlikeCard(t):S.likeCard(t)).then((t=>{if("boolean"!=typeof t.isLiked)throw new Error("Invalid like response");e.updateLikes(t)})).catch((e=>{console.error("Failed to toggle like:",e)}))}),v);p.addItem(i.getView())}function k(e){g.open(e)}g.setEventListeners(),S.getAppData().then((e=>{let[t,i]=e;v=t._id,o.setUserInfo(t),p.renderItems(i)})),m.profileEditButton.addEventListener("click",(()=>{c.resetValidation(),b.setInputValues(o.getUserInfo()),b.open()})),m.cardAddButton.addEventListener("click",(()=>{h.resetValidation(),f.open()})),m.avatarEditButton.addEventListener("click",(()=>{_.resetValidation(),y.open()}))}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2pCbUosRUFBcUIzSCxNQUFNLElBRzdCMkQsRUFBSTBELGlCQUFpQmxMLGlCQUFpQixTQUFTLEtBQzdDdUgsRUFBb0JsRixrQkFDcEIwSixFQUFnQmxJLE1BQU0sR0FLeEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT0gU2VsZWN0b3JzID09PVxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG59O1xyXG5cclxuLy8gPT09IFZhbGlkYXRpb24gU2V0dGluZ3MgPT09XHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vLyA9PT0gRE9NIEVsZW1lbnRzIEdldHRlciA9PT1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERPTUVsZW1lbnRzKCkge1xyXG4gIGNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbiAgY29uc3QgY2FyZEFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuICBjb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cC1wcmV2aWV3LW1vZGFsXCIpO1xyXG4gIGNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZWRpdC1tb2RhbFwiKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHByb2ZpbGUsXHJcbiAgICBwcm9maWxlRWRpdEJ1dHRvbjogcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIiksXHJcbiAgICBwcm9maWxlVGl0bGU6IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlXCIpLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uOiBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKSxcclxuXHJcbiAgICBjYXJkQWRkQnV0dG9uOiBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtYnV0dG9uXCIpLFxyXG4gICAgY2FyZExpc3RFbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZFNlY3Rpb24pLFxyXG4gICAgY2FyZFRlbXBsYXRlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUpLFxyXG5cclxuICAgIHByb2ZpbGVFZGl0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKSxcclxuICAgIHByb2ZpbGVFZGl0Rm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKSxcclxuICAgIHByb2ZpbGVUaXRsZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIiksXHJcbiAgICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbiAgICApLFxyXG5cclxuICAgIGNhcmRBZGQ6IGNhcmRBZGRNb2RhbCxcclxuICAgIGNhcmRBZGRGb3JtOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIiksXHJcbiAgICBjYXJkVGl0bGVJbnB1dDogY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIiksXHJcbiAgICBjYXJkSW1hZ2VJbnB1dDogY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1kZXNjcmlwdGlvbi1pbnB1dFwiKSxcclxuICAgIGNhcmRVUkxJbnB1dDogY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdXJsXCIpLFxyXG5cclxuICAgIGltYWdlTW9kYWwsXHJcbiAgICBpbWFnZU1vZGFsSW1hZ2U6IGltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1tb2RhbC1pbWFnZVwiKSxcclxuICAgIGltYWdlTW9kYWxDYXB0aW9uOiBpbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtY2FwdGlvblwiKSxcclxuXHJcbiAgICBhdmF0YXJFZGl0Rm9ybTogYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKSxcclxuICAgIGF2YXRhckVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uXCIpLFxyXG5cclxuICAgIGNvbmZpcm1EZWxldGVNb2RhbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiKSxcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgPSBmYWxzZSB9LFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxyXG4gICAgY3VycmVudFVzZXJJZFxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3VwZGF0ZUxpa2VzVmlldygpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMsIHRoaXMuX2lkKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VzKHsgaXNMaWtlZCB9KSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcclxuICAgIHRoaXMuX3VwZGF0ZUxpa2VzVmlldygpO1xyXG4gIH1cclxuXHJcbiAgX3VwZGF0ZUxpa2VzVmlldygpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zID0gW10sIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMgPSB0aGlzLl9pdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCBpc092ZXJsYXlDbGljayA9IGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudDtcclxuICAgICAgY29uc3QgaXNDbG9zZUJ0bkNsaWNrID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIik7XHJcblxyXG4gICAgICBpZiAoaXNPdmVybGF5Q2xpY2sgfHwgaXNDbG9zZUJ0bkNsaWNrKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVmYXVsdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBjb25zdCB2YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgIGlucHV0LnZhbHVlID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUudHJpbSgpIDogXCJcIjtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZm9ybURhdGEpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGb3JtIHN1Ym1pc3Npb24gZmFpbGVkOlwiLCBlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0ID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gaXNMb2FkaW5nXHJcbiAgICAgID8gbG9hZGluZ1RleHRcclxuICAgICAgOiB0aGlzLl9kZWZhdWx0QnV0dG9uVGV4dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLW1vZGFsLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZSA/IGBQaG90byBvZiAke25hbWV9YCA6IFwiUGhvdG8gcHJldmlld1wiO1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWUgfHwgXCJcIjtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBcIi5tb2RhbF9fYnV0dG9uXCIgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vcmlnaW5hbEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZykge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gaXNTYXZpbmdcclxuICAgICAgPyBcIkRlbGV0aW5nLi4uXCJcclxuICAgICAgOiB0aGlzLl9vcmlnaW5hbEJ1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHRoaXMuX2hhbmRsZVN1Ym1pdCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgIHJlc3VsdC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQb3B1cFdpdGhDb25maXJtIHN1Ym1pdCBlcnJvcjpcIiwgZXJyKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIGlmIChuYW1lKSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBpZiAoYWJvdXQpIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIGlmIChhdmF0YXIpIHRoaXMuc2V0QXZhdGFyKGF2YXRhcik7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICBpZiAodGhpcy5fYXZhdGFyRWxlbWVudCkge1xyXG4gICAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhclVybDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHtcclxuICBzZWxlY3RvcnMsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGdldERPTUVsZW1lbnRzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmxldCBlZGl0Rm9ybVZhbGlkYXRvcjtcclxubGV0IGFkZEZvcm1WYWxpZGF0b3I7XHJcbmxldCBhdmF0YXJGb3JtVmFsaWRhdG9yO1xyXG5sZXQgZG9tO1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcbmxldCB1c2VySWQ7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI4MDZhMmJhYS0wODFkLTQzMjEtYjQ3My1lNTEzMDBiY2Y2MzJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGRvbSA9IGdldERPTUVsZW1lbnRzKCk7XHJcblxyXG4gIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZVwiLFxyXG4gICAgam9iU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcclxuICAgIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG4gIH0pO1xyXG5cclxuICBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gICAgZG9tLnByb2ZpbGVFZGl0Rm9ybVxyXG4gICk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBkb20uY2FyZEFkZEZvcm0pO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgICBkb20uYXZhdGFyRWRpdEZvcm1cclxuICApO1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuICBjb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBcIiNjb25maXJtLWRlbGV0ZS1tb2RhbFwiLFxyXG4gIH0pO1xyXG4gIGNvbmZpcm1EZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgeyBpdGVtczogW10sIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuICApO1xyXG5cclxuICBjb25zdCBjYXJkQWRkUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICAgICh2YWx1ZXMpID0+IHtcclxuICAgICAgcmV0dXJuIGFwaVxyXG4gICAgICAgIC5hZGRDYXJkKHsgbmFtZTogdmFsdWVzLnRpdGxlLCBsaW5rOiB2YWx1ZXMudXJsIH0pXHJcbiAgICAgICAgLnRoZW4oKG5ld0NhcmQpID0+IHtcclxuICAgICAgICAgIHJlbmRlckNhcmQobmV3Q2FyZCk7XHJcbiAgICAgICAgICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICApO1xyXG4gIGNhcmRBZGRQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gICAgKHZhbHVlcykgPT4ge1xyXG4gICAgICByZXR1cm4gYXBpXHJcbiAgICAgICAgLnVwZGF0ZVVzZXJJbmZvKHsgbmFtZTogdmFsdWVzLm5hbWUsIGFib3V0OiB2YWx1ZXMuYWJvdXQgfSlcclxuICAgICAgICAudGhlbigodXBkYXRlZFVzZXIpID0+IHtcclxuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVwZGF0ZWRVc2VyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICApO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgY29uc3QgYXZhdGFyRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYXZhdGFyLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xyXG4gICAgcmV0dXJuIGFwaS51cGRhdGVBdmF0YXIodmFsdWVzLmF2YXRhcikudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIGF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLXByZXZpZXctbW9kYWxcIik7XHJcbiAgaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICBhcGkuZ2V0QXBwRGF0YSgpLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSkge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICBpdGVtLFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlLFxyXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgICAoY2FyZEluc3RhbmNlLCBjYXJkSWQpID0+IHtcclxuICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5yZW5kZXJTYXZpbmcodHJ1ZSk7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEluc3RhbmNlLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xyXG4gICAgICB9LFxyXG4gICAgICAoY2FyZEluc3RhbmNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZElkID0gY2FyZEluc3RhbmNlLmdldElkKCk7XHJcbiAgICAgICAgY29uc3QgaXNMaWtlZCA9IGNhcmRJbnN0YW5jZS5pc0xpa2VkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpc0xpa2VkID8gYXBpLnVubGlrZUNhcmQoY2FyZElkKSA6IGFwaS5saWtlQ2FyZChjYXJkSWQpO1xyXG5cclxuICAgICAgICByZXF1ZXN0XHJcbiAgICAgICAgICAudGhlbigodXBkYXRlZENhcmQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVkQ2FyZC5pc0xpa2VkICE9PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGlrZSByZXNwb25zZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXJkSW5zdGFuY2UudXBkYXRlTGlrZXModXBkYXRlZENhcmQpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdG9nZ2xlIGxpa2U6XCIsIGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgdXNlcklkXHJcbiAgICApO1xyXG5cclxuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZXRWaWV3KCkpO1xyXG4gIH1cclxuXHJcbiAgZG9tLnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgIHByb2ZpbGVFZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XHJcbiAgICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgZG9tLmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICBjYXJkQWRkUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRvbS5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gICAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xyXG4gICAgaW1hZ2VQb3B1cC5vcGVuKGNhcmREYXRhKTtcclxuICB9XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KGVuZHBvaW50LCBvcHRpb25zID0ge30pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfSR7ZW5kcG9pbnR9YCwge1xyXG4gICAgICAuLi5vcHRpb25zLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KFwiL3VzZXJzL21lXCIpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvY2FyZHNcIik7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChcIi9jYXJkc1wiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAvY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAoIXJlcyB8fCB0eXBlb2YgcmVzLmlzTGlrZWQgIT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBsaWtlIHJlc3BvbnNlXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXM7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVubGlrZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmICghcmVzIHx8IHR5cGVvZiByZXMuaXNMaWtlZCAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHVubGlrZSByZXNwb25zZVwiKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbGVjdG9ycyIsInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsImN1cnJlbnRVc2VySWQiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9jdXJyZW50VXNlcklkIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1hZ2UiLCJxdWVyeVNlbGVjdG9yIiwiX3RpdGxlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9saWtlQnV0dG9uIiwiZ2V0SWQiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfdXBkYXRlTGlrZXNWaWV3IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZUxpa2VzIiwiX3JlZjIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJyZW1vdmVDYXJkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiaXNPdmVybGF5Q2xpY2siLCJ0YXJnZXQiLCJpc0Nsb3NlQnRuQ2xpY2siLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfZGVmYXVsdEJ1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInRyaW0iLCJmb3JtRGF0YSIsInJlbmRlckxvYWRpbmciLCJ0aGVuIiwicmVzZXQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImZpbmFsbHkiLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsIlBvcHVwV2l0aEltYWdlIiwiX2NhcHRpb24iLCJQb3B1cFdpdGhDb25maXJtIiwiX29yaWdpbmFsQnV0dG9uVGV4dCIsIl9oYW5kbGVTdWJtaXQiLCJzZXRTdWJtaXRBY3Rpb24iLCJjYWxsYmFjayIsInJlbmRlclNhdmluZyIsImlzU2F2aW5nIiwicmVzdWx0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsImF2YXRhciIsInNldEF2YXRhciIsImF2YXRhclVybCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJkb20iLCJjYXJkU2VjdGlvbiIsInVzZXJJZCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsImZldGNoIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZUF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsImFkZENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsIkVycm9yIiwidW5saWtlQ2FyZCIsImdldEFwcERhdGEiLCJhbGwiLCJhdXRob3JpemF0aW9uIiwicHJvZmlsZSIsImNhcmRBZGRNb2RhbCIsImltYWdlTW9kYWwiLCJhdmF0YXJNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiY2FyZEFkZEJ1dHRvbiIsImNhcmRMaXN0RWwiLCJjYXJkVGVtcGxhdGUiLCJwcm9maWxlRWRpdCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkQWRkIiwiY2FyZEFkZEZvcm0iLCJjYXJkVGl0bGVJbnB1dCIsImNhcmRJbWFnZUlucHV0IiwiY2FyZFVSTElucHV0IiwiaW1hZ2VNb2RhbEltYWdlIiwiaW1hZ2VNb2RhbENhcHRpb24iLCJhdmF0YXJFZGl0Rm9ybSIsImF2YXRhckVkaXRCdXR0b24iLCJjb25maXJtRGVsZXRlTW9kYWwiLCJnZXRET01FbGVtZW50cyIsInVzZXJJbmZvIiwiY29uZmlybURlbGV0ZVBvcHVwIiwicmVuZGVyQ2FyZCIsImNhcmRBZGRQb3B1cFdpdGhGb3JtIiwidmFsdWVzIiwidGl0bGUiLCJ1cmwiLCJuZXdDYXJkIiwicHJvZmlsZUVkaXRQb3B1cCIsInVwZGF0ZWRVc2VyIiwiYXZhdGFyRWRpdFBvcHVwIiwiaW1hZ2VQb3B1cCIsImNhcmQiLCJjYXJkSW5zdGFuY2UiLCJ1cGRhdGVkQ2FyZCIsImNhcmREYXRhIiwidXNlckRhdGEiLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=